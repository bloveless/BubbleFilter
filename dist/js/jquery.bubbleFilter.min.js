/*! BubbleFilter 2015-06-19 */
!function(a){function b(b){var c=a(b.target);if(0==a("#tag-"+d(c.data("value"))).length){g.push(c.data("value")),c.addClass("selected");var f=a(document.createElement("div")).addClass("tag").attr("id","tag-"+d(c.data("value"))).text(c.text()),i=a(document.createElement("i")).addClass(h.closeButtonClass).data("value",c.data("value"));f.append(i),e.text()==h.placeholderText&&e.empty(),e.append(f),h.scrollToInput&&a("html, body").animate({scrollTop:e.offset().top-h.scrollOffset}),"selectedTagCallback"in h&&h.selectedTagCallback(g)}}function c(b){b.stopPropagation();var c=a(b.target);if(c.hasClass(h.closeButtonClass)){var i=c.data("value"),j=g.indexOf(i);g.splice(j,1),c.parents(".tag").remove(),a("#filter-tag-"+d(i)).removeClass("selected"),0==g.length&&e.text(h.placeholderText),"selectedTagCallback"in h&&h.selectedTagCallback(g)}else c.hasClass("bubble-filter-input")||(c=c.parents(".bubble-filter-input")),f.css({top:c.offset().top+c.height(),width:c.outerWidth(),left:c.offset().left,display:"block"})}function d(a){return a.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}var e,f,g=[],h={};a.fn.bubbleFilter=function(g){h=a.extend({},a.fn.bubbleFilter.defaults,g),e=a(document.createElement("div")),e.addClass("bubble-filter-input").text(h.placeholderText).click(c),f=a(document.createElement("div")),f.addClass("bubble-filter-tag-container clearfix");for(var i in h.tags){var j=a(document.createElement("ul"));j.addClass("bubble-filter-tag-container-column").css("width",100/Object.keys(h.tags).length+"%"),j.append(a(document.createElement("li")).append(a(document.createElement("h3")).text(i)));for(var k in h.tags[i]){var l=a(document.createElement("li")).addClass("bubble-filter-tag").attr("id","filter-tag-"+d(h.tags[i][k])).data("value",h.tags[i][k]).text(k);l.click(b),j.append(l)}f.append(j)}return this.append(e),f.appendTo(document.body),a("html").click(function(a){f.css({display:"none"})}),a(window).resize(function(){f.css({display:"none"})}),this},a.fn.bubbleFilter.defaults={placeholderText:"Click here to select attributes to filter by",selectedTagCallback:void 0,closeButtonClass:"fa fa-close",scrollToInput:!0,scrollOffset:90}}(jQuery);